<template>
    <div>
        <the-bottom-modal
            v-model:show-m="bottomModal"
            >
            <div class="section-modal">
                <the-button-white @click="clickOnSection(currentFloor)">
                    Перейти к площадке
                </the-button-white>
            </div>
            {{ currentFloor.toolTipText }}
        </the-bottom-modal>
        <figure class="plane-on-main">
            <!--        <img
            class="plane-on-main__small-image"
            :src="config.public.baseImagesUrl + section.sectionImageSmall"
            alt="main map image"
            >-->
            <img
                v-if="loadSection"
                class="plane-on-main__plan-img"
                :src="config.public.baseImagesUrl + section.sectionImage"
                alt="main map image"
                >

            <svg
                class="svg-overlay"
                viewBox="0 0 2000 930"
                xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink"
                >
                <g id="Layer_x0020_1">
                    <metadata id="CorelCorpID_0Corel-Layer" />
                    <path
                        class="fil-label"
                        d="M255.68 151.53c-0.82,0 -1.55,-0.17 -2.19,-0.52 -0.64,-0.34 -1.14,-0.82 -1.5,-1.43 -0.36,-0.6 -0.54,-1.29 -0.54,-2.06 0,-0.78 0.18,-1.47 0.54,-2.07 0.36,-0.6 0.86,-1.08 1.5,-1.42 0.64,-0.34 1.37,-0.51 2.19,-0.51 0.76,0 1.43,0.15 2.01,0.46 0.59,0.31 1.03,0.76 1.33,1.36l-1.41 0.82c-0.23,-0.37 -0.52,-0.65 -0.85,-0.82 -0.34,-0.18 -0.7,-0.27 -1.09,-0.27 -0.45,0 -0.86,0.1 -1.22,0.3 -0.36,0.19 -0.64,0.47 -0.85,0.84 -0.2,0.36 -0.31,0.8 -0.31,1.31 0,0.51 0.11,0.94 0.31,1.31 0.21,0.37 0.49,0.65 0.85,0.84 0.36,0.2 0.77,0.29 1.22,0.29 0.39,0 0.75,-0.08 1.09,-0.26 0.33,-0.17 0.62,-0.45 0.85,-0.82l1.41 0.82c-0.3,0.59 -0.74,1.04 -1.33,1.36 -0.58,0.31 -1.25,0.47 -2.01,0.47z"
                        />
                    <path
                        id="1"
                        class="fil-label"
                        d="M264.16 151.53c-0.87,0 -1.63,-0.17 -2.28,-0.52 -0.65,-0.34 -1.15,-0.82 -1.51,-1.43 -0.35,-0.6 -0.53,-1.29 -0.53,-2.06 0,-0.78 0.17,-1.47 0.52,-2.07 0.35,-0.6 0.82,-1.08 1.44,-1.42 0.6,-0.34 1.3,-0.51 2.08,-0.51 0.76,0 1.44,0.17 2.04,0.5 0.59,0.33 1.06,0.8 1.4,1.4 0.35,0.61 0.52,1.32 0.52,2.14 0,0.08 -0.01,0.17 -0.01,0.27 -0.01,0.09 -0.01,0.19 -0.02,0.27l-6.52 0 0 -1.21 5.55 0 -0.72 0.38c0.01,-0.45 -0.08,-0.85 -0.28,-1.19 -0.19,-0.34 -0.46,-0.61 -0.79,-0.8 -0.34,-0.2 -0.73,-0.29 -1.17,-0.29 -0.45,0 -0.84,0.09 -1.18,0.29 -0.33,0.19 -0.6,0.46 -0.79,0.81 -0.19,0.35 -0.28,0.76 -0.28,1.22l0 0.3c0,0.46 0.1,0.88 0.32,1.24 0.21,0.36 0.52,0.64 0.91,0.84 0.39,0.19 0.84,0.29 1.34,0.29 0.44,0 0.84,-0.07 1.19,-0.21 0.35,-0.13 0.66,-0.35 0.94,-0.64l0.98 1.13c-0.35,0.41 -0.79,0.72 -1.33,0.94 -0.53,0.22 -1.14,0.33 -1.82,0.33z"
                        />
                    <path
                        id="2"
                        class="fil-label"
                        d="M275.45 151.43l-2.82 -3.75 1.49 -0.92 3.49 4.67 -2.16 0zm-5.61 0l0 -7.82 1.83 0 0 7.82 -1.83 0zm1.29 -3.14l0 -1.52 2.65 0 0 1.52 -2.65 0zm3.16 -0.55l-1.71 -0.21 2.87 -3.92 1.96 0 -3.12 4.13z"
                        />
                    <path
                        id="3"
                        class="fil-label"
                        d="M278.89 151.43l0 -7.82 1.83 0 0 6.27 3.74 0 0 -6.27 1.83 0 0 7.82 -7.4 0zm6.87 1.74l0 -1.78 0.43 0.04 -1.73 0 0 -1.55 3.02 0 0 3.29 -1.72 0z"
                        />
                    <polygon
                        id="4"
                        class="fil-label"
                        points="289.1,151.43 289.1,143.61 290.93,143.61 290.93,148.76 295.25,143.61 296.92,143.61 296.92,151.43 295.09,151.43 295.09,146.27 290.79,151.43 "
                        />
                    <path
                        id="5"
                        class="fil-label"
                        d="M304.35 151.43l0 -2.67 0.26 0.31 -2.34 0c-1.08,0 -1.92,-0.23 -2.53,-0.68 -0.61,-0.45 -0.91,-1.11 -0.91,-1.97 0,-0.92 0.32,-1.62 0.97,-2.09 0.65,-0.48 1.52,-0.72 2.6,-0.72l3.59 0 0 7.82 -1.64 0zm-5.63 0l2.11 -2.99 1.88 0 -2.02 2.99 -1.97 0zm5.63 -3.25l0 -3.52 0.26 0.49 -2.15 0c-0.57,0 -1,0.1 -1.31,0.31 -0.31,0.21 -0.46,0.55 -0.46,1.02 0,0.88 0.57,1.32 1.71,1.32l2.21 0 -0.26 0.38z"
                        />
                    <polygon
                        id="6"
                        class="fil-label"
                        points="313.55,151.43 313.55,141.91 314.38,142.77 311.38,142.77 311.38,141.18 315.45,141.18 315.45,151.43 "
                        />
                    <path
                        class="fil-label"
                        d="M607.24 151.53c-0.82,0 -1.55,-0.17 -2.19,-0.52 -0.63,-0.34 -1.14,-0.82 -1.5,-1.43 -0.36,-0.6 -0.54,-1.29 -0.54,-2.06 0,-0.78 0.18,-1.47 0.54,-2.07 0.36,-0.6 0.87,-1.08 1.5,-1.42 0.64,-0.34 1.37,-0.51 2.19,-0.51 0.77,0 1.44,0.15 2.02,0.46 0.58,0.31 1.02,0.76 1.32,1.36l-1.4 0.82c-0.24,-0.37 -0.52,-0.65 -0.86,-0.82 -0.34,-0.18 -0.7,-0.27 -1.09,-0.27 -0.45,0 -0.86,0.1 -1.22,0.3 -0.36,0.19 -0.64,0.47 -0.85,0.84 -0.2,0.36 -0.3,0.8 -0.3,1.31 0,0.51 0.1,0.94 0.3,1.31 0.21,0.37 0.49,0.65 0.85,0.84 0.36,0.2 0.77,0.29 1.22,0.29 0.39,0 0.75,-0.08 1.09,-0.26 0.34,-0.17 0.62,-0.45 0.86,-0.82l1.4 0.82c-0.3,0.59 -0.74,1.04 -1.32,1.36 -0.58,0.31 -1.25,0.47 -2.02,0.47z"
                        />
                    <path
                        id="1"
                        class="fil-label"
                        d="M615.72 151.53c-0.87,0 -1.62,-0.17 -2.27,-0.52 -0.65,-0.34 -1.16,-0.82 -1.51,-1.43 -0.36,-0.6 -0.54,-1.29 -0.54,-2.06 0,-0.78 0.18,-1.47 0.52,-2.07 0.35,-0.6 0.83,-1.08 1.44,-1.42 0.61,-0.34 1.3,-0.51 2.09,-0.51 0.76,0 1.44,0.17 2.03,0.5 0.6,0.33 1.06,0.8 1.41,1.4 0.34,0.61 0.51,1.32 0.51,2.14 0,0.08 0,0.17 -0.01,0.27 0,0.09 -0.01,0.19 -0.02,0.27l-6.52 0 0 -1.21 5.55 0 -0.71 0.38c0.01,-0.45 -0.09,-0.85 -0.28,-1.19 -0.2,-0.34 -0.46,-0.61 -0.8,-0.8 -0.34,-0.2 -0.72,-0.29 -1.16,-0.29 -0.45,0 -0.85,0.09 -1.18,0.29 -0.34,0.19 -0.6,0.46 -0.79,0.81 -0.19,0.35 -0.29,0.76 -0.29,1.22l0 0.3c0,0.46 0.11,0.88 0.32,1.24 0.22,0.36 0.52,0.64 0.91,0.84 0.39,0.19 0.84,0.29 1.35,0.29 0.44,0 0.83,-0.07 1.18,-0.21 0.35,-0.13 0.67,-0.35 0.94,-0.64l0.98 1.13c-0.35,0.41 -0.79,0.72 -1.32,0.94 -0.54,0.22 -1.14,0.33 -1.83,0.33z"
                        />
                    <path
                        id="2"
                        class="fil-label"
                        d="M627.02 151.43l-2.83 -3.75 1.49 -0.92 3.49 4.67 -2.15 0zm-5.61 0l0 -7.82 1.83 0 0 7.82 -1.83 0zm1.29 -3.14l0 -1.52 2.65 0 0 1.52 -2.65 0zm3.16 -0.55l-1.72 -0.21 2.88 -3.92 1.96 0 -3.12 4.13z"
                        />
                    <path
                        id="3"
                        class="fil-label"
                        d="M630.46 151.43l0 -7.82 1.83 0 0 6.27 3.73 0 0 -6.27 1.83 0 0 7.82 -7.39 0zm6.87 1.74l0 -1.78 0.42 0.04 -1.73 0 0 -1.55 3.02 0 0 3.29 -1.71 0z"
                        />
                    <polygon
                        id="4"
                        class="fil-label"
                        points="640.67,151.43 640.67,143.61 642.5,143.61 642.5,148.76 646.82,143.61 648.49,143.61 648.49,151.43 646.66,151.43 646.66,146.27 642.35,151.43 "
                        />
                    <path
                        id="5"
                        class="fil-label"
                        d="M655.91 151.43l0 -2.67 0.26 0.31 -2.34 0c-1.07,0 -1.91,-0.23 -2.52,-0.68 -0.61,-0.45 -0.92,-1.11 -0.92,-1.97 0,-0.92 0.32,-1.62 0.97,-2.09 0.65,-0.48 1.52,-0.72 2.6,-0.72l3.59 0 0 7.82 -1.64 0zm-5.62 0l2.11 -2.99 1.87 0 -2.02 2.99 -1.96 0zm5.62 -3.25l0 -3.52 0.26 0.49 -2.15 0c-0.56,0 -1,0.1 -1.31,0.31 -0.31,0.21 -0.46,0.55 -0.46,1.02 0,0.88 0.57,1.32 1.71,1.32l2.21 0 -0.26 0.38z"
                        />
                    <path
                        id="6"
                        class="fil-label"
                        d="M663.34 151.43l0 -1.28 4.07 -3.86c0.34,-0.32 0.59,-0.61 0.76,-0.85 0.17,-0.24 0.28,-0.47 0.33,-0.68 0.05,-0.21 0.08,-0.41 0.08,-0.59 0,-0.47 -0.16,-0.84 -0.48,-1.1 -0.33,-0.25 -0.8,-0.38 -1.42,-0.38 -0.5,0 -0.95,0.08 -1.36,0.26 -0.4,0.17 -0.75,0.44 -1.05,0.8l-1.33 -1.02c0.4,-0.54 0.94,-0.96 1.62,-1.25 0.68,-0.3 1.44,-0.45 2.28,-0.45 0.74,0 1.39,0.12 1.94,0.36 0.55,0.24 0.97,0.58 1.27,1.02 0.3,0.44 0.45,0.96 0.45,1.56 0,0.34 -0.05,0.67 -0.13,0.99 -0.09,0.33 -0.26,0.67 -0.5,1.04 -0.24,0.36 -0.6,0.76 -1.07,1.21l-3.5 3.33 -0.4 -0.72 5.99 0 0 1.61 -7.55 0z"
                        />
                    <path
                        class="fil-label"
                        d="M954.12 151.53c-0.82,0 -1.55,-0.17 -2.19,-0.52 -0.64,-0.34 -1.14,-0.82 -1.5,-1.43 -0.36,-0.6 -0.54,-1.29 -0.54,-2.06 0,-0.78 0.18,-1.47 0.54,-2.07 0.36,-0.6 0.86,-1.08 1.5,-1.42 0.64,-0.34 1.37,-0.51 2.19,-0.51 0.76,0 1.43,0.15 2.02,0.46 0.58,0.31 1.02,0.76 1.32,1.36l-1.41 0.82c-0.23,-0.37 -0.52,-0.65 -0.85,-0.82 -0.34,-0.18 -0.7,-0.27 -1.09,-0.27 -0.45,0 -0.86,0.1 -1.22,0.3 -0.36,0.19 -0.64,0.47 -0.85,0.84 -0.2,0.36 -0.31,0.8 -0.31,1.31 0,0.51 0.11,0.94 0.31,1.31 0.21,0.37 0.49,0.65 0.85,0.84 0.36,0.2 0.77,0.29 1.22,0.29 0.39,0 0.75,-0.08 1.09,-0.26 0.33,-0.17 0.62,-0.45 0.85,-0.82l1.41 0.82c-0.3,0.59 -0.74,1.04 -1.32,1.36 -0.59,0.31 -1.26,0.47 -2.02,0.47z"
                        />
                    <path
                        id="1"
                        class="fil-label"
                        d="M962.6 151.53c-0.87,0 -1.63,-0.17 -2.28,-0.52 -0.65,-0.34 -1.15,-0.82 -1.51,-1.43 -0.35,-0.6 -0.53,-1.29 -0.53,-2.06 0,-0.78 0.17,-1.47 0.52,-2.07 0.35,-0.6 0.83,-1.08 1.44,-1.42 0.61,-0.34 1.3,-0.51 2.08,-0.51 0.76,0 1.44,0.17 2.04,0.5 0.59,0.33 1.06,0.8 1.4,1.4 0.35,0.61 0.52,1.32 0.52,2.14 0,0.08 -0.01,0.17 -0.01,0.27 -0.01,0.09 -0.01,0.19 -0.02,0.27l-6.52 0 0 -1.21 5.55 0 -0.72 0.38c0.01,-0.45 -0.08,-0.85 -0.28,-1.19 -0.19,-0.34 -0.46,-0.61 -0.79,-0.8 -0.34,-0.2 -0.73,-0.29 -1.17,-0.29 -0.45,0 -0.84,0.09 -1.18,0.29 -0.33,0.19 -0.6,0.46 -0.79,0.81 -0.19,0.35 -0.28,0.76 -0.28,1.22l0 0.3c0,0.46 0.1,0.88 0.32,1.24 0.21,0.36 0.52,0.64 0.91,0.84 0.39,0.19 0.84,0.29 1.34,0.29 0.44,0 0.84,-0.07 1.19,-0.21 0.35,-0.13 0.66,-0.35 0.94,-0.64l0.98 1.13c-0.35,0.41 -0.79,0.72 -1.33,0.94 -0.53,0.22 -1.14,0.33 -1.82,0.33z"
                        />
                    <path
                        id="2"
                        class="fil-label"
                        d="M973.89 151.43l-2.82 -3.75 1.49 -0.92 3.49 4.67 -2.16 0zm-5.61 0l0 -7.82 1.83 0 0 7.82 -1.83 0zm1.29 -3.14l0 -1.52 2.65 0 0 1.52 -2.65 0zm3.17 -0.55l-1.72 -0.21 2.87 -3.92 1.96 0 -3.11 4.13z"
                        />
                    <path
                        id="3"
                        class="fil-label"
                        d="M977.33 151.43l0 -7.82 1.84 0 0 6.27 3.73 0 0 -6.27 1.83 0 0 7.82 -7.4 0zm6.87 1.74l0 -1.78 0.43 0.04 -1.73 0 0 -1.55 3.02 0 0 3.29 -1.72 0z"
                        />
                    <polygon
                        id="4"
                        class="fil-label"
                        points="987.54,151.43 987.54,143.61 989.37,143.61 989.37,148.76 993.69,143.61 995.36,143.61 995.36,151.43 993.53,151.43 993.53,146.27 989.23,151.43 "
                        />
                    <path
                        id="5"
                        class="fil-label"
                        d="M1002.79 151.43l0 -2.67 0.26 0.31 -2.34 0c-1.07,0 -1.92,-0.23 -2.53,-0.68 -0.61,-0.45 -0.91,-1.11 -0.91,-1.97 0,-0.92 0.32,-1.62 0.97,-2.09 0.65,-0.48 1.52,-0.72 2.6,-0.72l3.59 0 0 7.82 -1.64 0zm-5.62 0l2.1 -2.99 1.88 0 -2.02 2.99 -1.96 0zm5.62 -3.25l0 -3.52 0.26 0.49 -2.15 0c-0.57,0 -1,0.1 -1.31,0.31 -0.31,0.21 -0.46,0.55 -0.46,1.02 0,0.88 0.57,1.32 1.71,1.32l2.21 0 -0.26 0.38z"
                        />
                    <path
                        id="6"
                        class="fil-label"
                        d="M1013.57 151.58c-0.72,0 -1.43,-0.11 -2.12,-0.32 -0.69,-0.21 -1.27,-0.5 -1.73,-0.87l0.82 -1.48c0.37,0.3 0.82,0.55 1.34,0.73 0.53,0.19 1.08,0.28 1.66,0.28 0.68,0 1.21,-0.14 1.59,-0.42 0.39,-0.27 0.58,-0.65 0.58,-1.13 0,-0.47 -0.18,-0.84 -0.53,-1.11 -0.35,-0.28 -0.92,-0.41 -1.7,-0.41l-0.94 0 0 -1.31 2.93 -3.48 0.25 0.71 -5.51 0 0 -1.59 6.99 0 0 1.27 -2.93 3.49 -0.99 -0.59 0.57 0c1.26,0 2.2,0.28 2.83,0.84 0.63,0.56 0.94,1.28 0.94,2.16 0,0.58 -0.14,1.11 -0.43,1.6 -0.3,0.49 -0.74,0.88 -1.34,1.18 -0.61,0.3 -1.36,0.45 -2.28,0.45z"
                        />
                    <path
                        class="fil-label"
                        d="M1333.03 151.53c-0.82,0 -1.55,-0.17 -2.19,-0.52 -0.64,-0.34 -1.14,-0.82 -1.5,-1.43 -0.36,-0.6 -0.54,-1.29 -0.54,-2.06 0,-0.78 0.18,-1.47 0.54,-2.07 0.36,-0.6 0.86,-1.08 1.5,-1.42 0.64,-0.34 1.37,-0.51 2.19,-0.51 0.76,0 1.43,0.15 2.01,0.46 0.58,0.31 1.03,0.76 1.33,1.36l-1.41 0.82c-0.23,-0.37 -0.52,-0.65 -0.86,-0.82 -0.33,-0.18 -0.7,-0.27 -1.09,-0.27 -0.45,0 -0.85,0.1 -1.21,0.3 -0.36,0.19 -0.65,0.47 -0.85,0.84 -0.21,0.36 -0.31,0.8 -0.31,1.31 0,0.51 0.1,0.94 0.31,1.31 0.2,0.37 0.49,0.65 0.85,0.84 0.36,0.2 0.76,0.29 1.21,0.29 0.39,0 0.76,-0.08 1.09,-0.26 0.34,-0.17 0.63,-0.45 0.86,-0.82l1.41 0.82c-0.3,0.59 -0.75,1.04 -1.33,1.36 -0.58,0.31 -1.25,0.47 -2.01,0.47z"
                        />
                    <path
                        id="1"
                        class="fil-label"
                        d="M1341.51 151.53c-0.87,0 -1.63,-0.17 -2.28,-0.52 -0.65,-0.34 -1.15,-0.82 -1.51,-1.43 -0.35,-0.6 -0.53,-1.29 -0.53,-2.06 0,-0.78 0.17,-1.47 0.52,-2.07 0.34,-0.6 0.82,-1.08 1.43,-1.42 0.61,-0.34 1.31,-0.51 2.09,-0.51 0.76,0 1.44,0.17 2.04,0.5 0.59,0.33 1.06,0.8 1.4,1.4 0.34,0.61 0.51,1.32 0.51,2.14 0,0.08 0,0.17 0,0.27 -0.01,0.09 -0.02,0.19 -0.03,0.27l-6.51 0 0 -1.21 5.55 0 -0.72 0.38c0.01,-0.45 -0.08,-0.85 -0.28,-1.19 -0.19,-0.34 -0.46,-0.61 -0.8,-0.8 -0.33,-0.2 -0.72,-0.29 -1.16,-0.29 -0.45,0 -0.84,0.09 -1.18,0.29 -0.34,0.19 -0.6,0.46 -0.79,0.81 -0.19,0.35 -0.29,0.76 -0.29,1.22l0 0.3c0,0.46 0.11,0.88 0.33,1.24 0.21,0.36 0.51,0.64 0.9,0.84 0.39,0.19 0.84,0.29 1.35,0.29 0.44,0 0.84,-0.07 1.19,-0.21 0.35,-0.13 0.66,-0.35 0.94,-0.64l0.98 1.13c-0.35,0.41 -0.8,0.72 -1.33,0.94 -0.53,0.22 -1.14,0.33 -1.82,0.33z"
                        />
                    <path
                        id="2"
                        class="fil-label"
                        d="M1352.8 151.43l-2.83 -3.75 1.5 -0.92 3.48 4.67 -2.15 0zm-5.61 0l0 -7.82 1.83 0 0 7.82 -1.83 0zm1.29 -3.14l0 -1.52 2.65 0 0 1.52 -2.65 0zm3.16 -0.55l-1.71 -0.21 2.87 -3.92 1.96 0 -3.12 4.13z"
                        />
                    <path
                        id="3"
                        class="fil-label"
                        d="M1356.24 151.43l0 -7.82 1.83 0 0 6.27 3.74 0 0 -6.27 1.83 0 0 7.82 -7.4 0zm6.87 1.74l0 -1.78 0.43 0.04 -1.73 0 0 -1.55 3.01 0 0 3.29 -1.71 0z"
                        />
                    <polygon
                        id="4"
                        class="fil-label"
                        points="1366.45,151.43 1366.45,143.61 1368.28,143.61 1368.28,148.76 1372.6,143.61 1374.27,143.61 1374.27,151.43 1372.44,151.43 1372.44,146.27 1368.13,151.43 "
                        />
                    <path
                        id="5"
                        class="fil-label"
                        d="M1381.7 151.43l0 -2.67 0.26 0.31 -2.34 0c-1.08,0 -1.92,-0.23 -2.53,-0.68 -0.61,-0.45 -0.92,-1.11 -0.92,-1.97 0,-0.92 0.33,-1.62 0.98,-2.09 0.65,-0.48 1.51,-0.72 2.6,-0.72l3.59 0 0 7.82 -1.64 0zm-5.63 0l2.11 -2.99 1.88 0 -2.03 2.99 -1.96 0zm5.63 -3.25l0 -3.52 0.26 0.49 -2.15 0c-0.57,0 -1.01,0.1 -1.31,0.31 -0.31,0.21 -0.47,0.55 -0.47,1.02 0,0.88 0.58,1.32 1.72,1.32l2.21 0 -0.26 0.38z"
                        />
                    <path
                        id="6"
                        class="fil-label"
                        d="M1389.11 149.1l0 -1.32 5.05 -6.6 2.04 0 -4.98 6.6 -0.96 -0.29 8.13 0 0 1.61 -9.28 0zm5.62 2.33l0 -2.33 0.06 -1.61 0 -2.07 1.79 0 0 6.01 -1.85 0z"
                        />
                    <path
                        class="fil-label"
                        d="M1685.37 151.53c-0.82,0 -1.55,-0.17 -2.19,-0.52 -0.64,-0.34 -1.14,-0.82 -1.5,-1.43 -0.36,-0.6 -0.54,-1.29 -0.54,-2.06 0,-0.78 0.18,-1.47 0.54,-2.07 0.36,-0.6 0.86,-1.08 1.5,-1.42 0.64,-0.34 1.37,-0.51 2.19,-0.51 0.76,0 1.44,0.15 2.02,0.46 0.58,0.31 1.02,0.76 1.32,1.36l-1.4 0.82c-0.24,-0.37 -0.52,-0.65 -0.86,-0.82 -0.34,-0.18 -0.7,-0.27 -1.09,-0.27 -0.45,0 -0.86,0.1 -1.22,0.3 -0.36,0.19 -0.64,0.47 -0.85,0.84 -0.2,0.36 -0.3,0.8 -0.3,1.31 0,0.51 0.1,0.94 0.3,1.31 0.21,0.37 0.49,0.65 0.85,0.84 0.36,0.2 0.77,0.29 1.22,0.29 0.39,0 0.75,-0.08 1.09,-0.26 0.34,-0.17 0.62,-0.45 0.86,-0.82l1.4 0.82c-0.3,0.59 -0.74,1.04 -1.32,1.36 -0.58,0.31 -1.26,0.47 -2.02,0.47z"
                        />
                    <path
                        id="1"
                        class="fil-label"
                        d="M1693.85 151.53c-0.87,0 -1.63,-0.17 -2.28,-0.52 -0.64,-0.34 -1.15,-0.82 -1.5,-1.43 -0.36,-0.6 -0.54,-1.29 -0.54,-2.06 0,-0.78 0.18,-1.47 0.52,-2.07 0.35,-0.6 0.83,-1.08 1.44,-1.42 0.61,-0.34 1.3,-0.51 2.08,-0.51 0.77,0 1.44,0.17 2.04,0.5 0.59,0.33 1.06,0.8 1.41,1.4 0.34,0.61 0.51,1.32 0.51,2.14 0,0.08 0,0.17 -0.01,0.27 0,0.09 -0.01,0.19 -0.02,0.27l-6.52 0 0 -1.21 5.55 0 -0.71 0.38c0,-0.45 -0.09,-0.85 -0.28,-1.19 -0.2,-0.34 -0.46,-0.61 -0.8,-0.8 -0.34,-0.2 -0.73,-0.29 -1.17,-0.29 -0.45,0 -0.84,0.09 -1.18,0.29 -0.33,0.19 -0.6,0.46 -0.79,0.81 -0.19,0.35 -0.28,0.76 -0.28,1.22l0 0.3c0,0.46 0.11,0.88 0.32,1.24 0.22,0.36 0.52,0.64 0.91,0.84 0.39,0.19 0.84,0.29 1.35,0.29 0.44,0 0.83,-0.07 1.18,-0.21 0.35,-0.13 0.67,-0.35 0.94,-0.64l0.98 1.13c-0.35,0.41 -0.79,0.72 -1.32,0.94 -0.54,0.22 -1.14,0.33 -1.83,0.33z"
                        />
                    <path
                        id="2"
                        class="fil-label"
                        d="M1705.14 151.43l-2.82 -3.75 1.49 -0.92 3.49 4.67 -2.16 0zm-5.6 0l0 -7.82 1.83 0 0 7.82 -1.83 0zm1.28 -3.14l0 -1.52 2.65 0 0 1.52 -2.65 0zm3.17 -0.55l-1.72 -0.21 2.87 -3.92 1.97 0 -3.12 4.13z"
                        />
                    <path
                        id="3"
                        class="fil-label"
                        d="M1708.59 151.43l0 -7.82 1.83 0 0 6.27 3.73 0 0 -6.27 1.83 0 0 7.82 -7.39 0zm6.86 1.74l0 -1.78 0.43 0.04 -1.73 0 0 -1.55 3.02 0 0 3.29 -1.72 0z"
                        />
                    <polygon
                        id="4"
                        class="fil-label"
                        points="1718.79,151.43 1718.79,143.61 1720.63,143.61 1720.63,148.76 1724.95,143.61 1726.61,143.61 1726.61,151.43 1724.78,151.43 1724.78,146.27 1720.48,151.43 "
                        />
                    <path
                        id="5"
                        class="fil-label"
                        d="M1734.04 151.43l0 -2.67 0.26 0.31 -2.34 0c-1.07,0 -1.92,-0.23 -2.53,-0.68 -0.61,-0.45 -0.91,-1.11 -0.91,-1.97 0,-0.92 0.32,-1.62 0.97,-2.09 0.65,-0.48 1.52,-0.72 2.6,-0.72l3.59 0 0 7.82 -1.64 0zm-5.62 0l2.11 -2.99 1.87 0 -2.02 2.99 -1.96 0zm5.62 -3.25l0 -3.52 0.26 0.49 -2.15 0c-0.57,0 -1,0.1 -1.31,0.31 -0.31,0.21 -0.46,0.55 -0.46,1.02 0,0.88 0.57,1.32 1.71,1.32l2.21 0 -0.26 0.38z"
                        />
                    <path
                        id="6"
                        class="fil-label"
                        d="M1745 151.58c-0.73,0 -1.43,-0.11 -2.12,-0.32 -0.69,-0.21 -1.27,-0.5 -1.74,-0.87l0.81 -1.48c0.37,0.3 0.82,0.55 1.35,0.73 0.54,0.19 1.09,0.28 1.67,0.28 0.67,0 1.2,-0.14 1.59,-0.42 0.38,-0.29 0.57,-0.67 0.57,-1.15 0,-0.32 -0.08,-0.6 -0.24,-0.85 -0.16,-0.24 -0.44,-0.43 -0.85,-0.55 -0.4,-0.13 -0.96,-0.19 -1.66,-0.19l-2.47 0 0.52 -5.58 6.02 0 0 1.59 -5.31 0 0.99 -0.9 -0.39 4.17 -1 -0.89 2.06 0c1.02,0 1.84,0.13 2.46,0.4 0.62,0.27 1.07,0.64 1.36,1.11 0.29,0.48 0.43,1.01 0.43,1.62 0,0.6 -0.14,1.14 -0.44,1.64 -0.29,0.5 -0.74,0.9 -1.34,1.2 -0.6,0.3 -1.36,0.46 -2.27,0.46z"
                        />
                </g>
                <defs>
                    <mask
                        id="holes"
                        class="holes-mask"
                        >
                        <rect
                            fill="#fff"
                            width="2000"
                            height="930"
                            />
                        <polygon
                            v-for="hole in section.sections"
                            :key="hole.d"
                            :points="hole.d"
                            :class="hole.classNameHoles"
                            />
                        <rect
                            class="fil0 str0"
                            x="238.49"
                            y="133.84"
                            width="91.02"
                            height="28.72"
                            rx="14"
                            ry="21.67"
                            />
                        <rect
                            class="fil0 str0"
                            x="590.05"
                            y="133.84"
                            width="91.02"
                            height="28.72"
                            rx="14"
                            ry="21.67"
                            />
                        <rect
                            class="fil0 str0"
                            x="936.93"
                            y="133.84"
                            width="91.02"
                            height="28.72"
                            rx="14"
                            ry="21.67"
                            />
                        <rect
                            class="fil0 str0"
                            x="1315.84"
                            y="133.84"
                            width="91.02"
                            height="28.72"
                            rx="14"
                            ry="21.67"
                            />
                        <rect
                            class="fil0 str0"
                            x="1668.18"
                            y="133.84"
                            width="91.02"
                            height="28.72"
                            rx="14"
                            ry="21.67"
                            />

                    </mask>
                </defs>
                <rect
                    class="shade"
                    width="2000"
                    height="930"
                    fill="#000"
                    fill-opacity="0.2  "
                    mask="url(#holes)"
                    />
                <g class="shapes">
                    <polygon
                        v-for="hole in section.sections"
                        :id="hole.idShape"
                        :key="hole.d"
                        :points="hole.d"
                        :class="hole.classNameShape"
                        @click="click(hole)"
                        />

                </g>

            </svg>
            <!--            <div class="sec-label-wrapper">
                            <div
                                id="label1"
                                class="sec-label"
                                >
                                Секция 1
                            </div>
                            <div
                                id="label2"
                                class="sec-label"
                                >
                                Секция 2
                            </div>
                            <div
                                id="label3"
                                class="sec-label"
                                >
                                Секция 3
                            </div>
                            <div
                                id="label4"
                                class="sec-label"
                                >
                                Секция 4
                            </div>
                            <div
                                id="label5"
                                class="sec-label"
                                >
                                Секция 5
                            </div>
                        </div>-->
            <div class="tooltips">
                <div
                    v-for="tooltip in section.sections"
                    :id="tooltip.idToolTip"
                    :key="tooltip.toolTipClass"
                    :class="tooltip.toolTipClass + ' sect'"
                    >
                    {{ tooltip.toolTipText }}
                </div>
            </div>
        </figure>
    </div>
</template>
<script setup>
import { onBeforeMount, onBeforeUnmount, onMounted, ref } from "vue"
import _ from "lodash"
import { touchScroll } from "../functions/touchScroll.js"
import { setHalhScrollLeft } from "../functions/setHalhScrollLeft.js"
import { setupTooltips } from "../functions/setupTooltips.js"
import { useRouter, useRoute, useRuntimeConfig } from "nuxt/app"
import { message } from "ant-design-vue"
import $url from "../functions/fetch.js"
import { isMobile } from "../functions/isMobile.js"
import apartsStore from "../store/store.js"
import { storeToRefs } from "pinia"

const astore = apartsStore()
const { bottomModal } = storeToRefs(astore)

const router = useRouter()
const route = useRoute()
const config = useRuntimeConfig()
const section = ref({})
const loadSection = ref(false)

const currentFloor = ref(null)
let listener
console.log("setup")
console.log(route.query)


function clickOnSection(e) {
    if (!e.sold) {
        router.push(e.routeTo)
    } else {
        message.error("Обьект продан")
    }
}

function click(e) {
    if (isMobile.any()) {
        currentFloor.value = e
        bottomModal.value = true
        console.log("click", e)
    } else {
        clickOnSection(e)
    }
}

onBeforeMount(() => {
    $url("/sections", {
        section: route.query.section | 3
    }).then((r) => {
        console.log(r)
        section.value = r
        loadSection.value = true
        return r
    }).catch(() => {
        message.error("Произошла ошибка на сервере, попробуйте обновить страницу!")
    })
})

onMounted(() => {
    console.log("onMounted")
    touchScroll(".plane-on-main")
    setHalhScrollLeft(".plane-on-main")
    listener = _.debounce(setupTooltips(
        ".plane-on-main",
        ".shape",
        "shape",
        ".tooltip",
        "tooltip-show",
        "polygon-show",
        ".shade"
    ), 1)
    window.addEventListener("mousemove", listener)

})
onBeforeUnmount(() => {
    console.log("remove listener")
    window.removeEventListener("mousemove", listener)
})
</script>
<style lang="scss">

body {
    margin: 0;
    font-family: sans-serif;
}

.plane-on-main {
    position: relative;
    overflow: hidden;
    overflow-x: auto;
    transition: .5s;
    box-sizing: border-box;

    height: 100vh;
    background: #e5fdfd;

    @include map {
        background: #f8d8ff;
    }

    &__plan-img {
        position: absolute;
        object-fit: cover;

        height: 100vh;
        width: initial;
        max-width: initial;

        @include map {
            height: initial;
            width: 100vw;
        }
    }

    &__small-image {
        position: absolute;
        -o-object-fit: cover;
        object-fit: cover;
        height: 100vh;
        width: initial;
        max-width: initial;

        @include map {
            height: initial;
            width: 100vw;
        }
    }
}

.svg-overlay {
    position: absolute;
    object-fit: cover;

    height: 100vh;
    width: initial;
    max-width: initial;

    @include map {
        height: initial;
        width: 100vw;
    }
}

.shapes .polygon {
    fill: none;
    stroke: #fff;
    stroke-width: 4px;
    stroke-opacity: 0;
    vector-effect: non-scaling-stroke;
    transition: stroke-opacity 0.5s;
    pointer-events: all;
}

.shapes .polygon-show {
    stroke-opacity: 1;
}

.sect {
    position: absolute;
    width: fit-content;
    //background-color: #36f43f;
    background-color: #f44336;
    color: #fff;
    padding: 5px 10px;
    border-radius: 9999px;
    pointer-events: none;
    opacity: 0;
    visibility: visible;
    will-change: transform, opacity;
    transition: opacity 0.5s;

}

.tooltip-show {
    visibility: visible;
    opacity: 1;
}

.holes-mask .polygon {
    fill: #333;
    transition: fill 0.5s;
}

.holes-mask .mask-show {
    fill: #000;
}

.shade {
    transition: fill-opacity 0.5s;
}

.sold {
    background-color: #a4a4a4;
}

.section-modal {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    height: 100%;
}


.sec-label {
    position: relative;
    color: white;
    font-family: 'Montserrat', serif;
    font-weight: 600;
}

/*#label1 {
    top: 187px;
    left: 345px;
}
#label2 {
    top: 187px;
    left: 751px;
}
#label3 {
    top: 187px;;
    left: 1144px;
}
#label4 {
    top: 187px;
    left: 1590px;
}
#label5 {
    top: 187px;
    left: 2000px;
}*/
.sec-label-wrapper {
    position: absolute;
    object-fit: cover;

    height: 100vh;
    width: initial;
    max-width: initial;

    @include map {
        height: initial;
        width: 100vw;
    }
}

#label1 {
    top: 187px;
    left: 345px;
}

#label2 {
    top: 187px;
    left: 751px;
}

#label3 {
    top: 187px;
    left: 1145px;
}

#label4 {
    top: 187px;
    left: 1590px;
}

#label5 {
    top: 187px;
    left: 2000px;
}

.fil-label {
    fill: #FEFEFE;
    fill-rule: nonzero
}
</style>
